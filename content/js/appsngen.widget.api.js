!function(a){"use strict";var b=function(){},c={},d=a.appstore||{},e=[];d.util={noop:b,onLoadHandlers:e,registerOnLoadHandler:function(a){e.push(a)},runOnLoadHandlers:function(){var a;for(a=0;a<e.length;a++)e[a]()},getURLParameter:function(a){var b=(new RegExp(a+"=(.+?)(&|$)").exec(location.search)||[null,null])[1];return b&&(b=decodeURIComponent(b)),b},format:function(a){var b;for(b=1;b<arguments.length;b++)a=a.replace(new RegExp("\\{"+(b-1)+"\\}","gm"),arguments[b]);return a},console:a.console||{log:b,error:b,warn:b,info:b},localStorage:a.localStorage||{getItem:function(a){return c[a]},setItem:function(a,b){c[a]=b},removeItem:function(a){delete c[a]},clear:function(){c={}},length:0},postMessage:function(a,b,c){c.postMessage(a,b)},receiveMessage:function(b){a.addEventListener?a.addEventListener("message",b,!1):a.attachEvent("onmessage",b)},isObject:function(a){return!(!a||a.constructor!==Object)},stringifyParams:function(a){var b,c,d=[];for(c in a)a.hasOwnProperty(c)&&d.push(a[c]instanceof Array?c+"="+encodeURIComponent(a[c].join("|")):c+"="+encodeURIComponent([a[c]].join("")));return b=d.join("&")},createRequestUri:function(a){var b,c=a.dataSourceId;return a.path&&(a.path="/"===a.path.charAt(0)?a.path:"/"+a.path,c+=a.path),this.isObject(a.params)&&(b=this.stringifyParams(a.params),""!==b&&(c+="?"+b)),c},base64:function(){var a="=",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=function(a,c){var d=b.indexOf(a.charAt(c));if(-1===d)throw"Cannot decode base64";return d},d=function(b){for(;b.length%4!==0;)b+="=";b=""+b;var d,e,f,g=b.length;if(0===g)return b;if(g%4!==0)throw"Cannot decode base64";d=0,b.charAt(g-1)===a&&(d=1,b.charAt(g-2)===a&&(d=2),g-=4);var h=[];for(e=0;g>e;e+=4)f=c(b,e)<<18|c(b,e+1)<<12|c(b,e+2)<<6|c(b,e+3),h.push(String.fromCharCode(f>>16,f>>8&255,255&f));switch(d){case 1:f=c(b,e)<<18|c(b,e+1)<<12|c(b,e+2)<<6,h.push(String.fromCharCode(f>>16,f>>8&255));break;case 2:f=c(b,e)<<18|c(b,e+1)<<12,h.push(String.fromCharCode(f>>16))}return h.join("")},e=function(a,b){var c=a.charCodeAt(b);if(c>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return c},f=function(c){if(1!==arguments.length)throw"SyntaxError: Not enough arguments";var d,f,g=[];c=""+c;var h=c.length-c.length%3;if(0===c.length)return c;for(d=0;h>d;d+=3)f=e(c,d)<<16|e(c,d+1)<<8|e(c,d+2),g.push(b.charAt(f>>18)),g.push(b.charAt(f>>12&63)),g.push(b.charAt(f>>6&63)),g.push(b.charAt(63&f));switch(c.length-h){case 1:f=e(c,d)<<16,g.push(b.charAt(f>>18)+b.charAt(f>>12&63)+a+a);break;case 2:f=e(c,d)<<16|e(c,d+1)<<8,g.push(b.charAt(f>>18)+b.charAt(f>>12&63)+b.charAt(f>>6&63)+a)}return g.join("")};return{encode:f,decode:d}}(),getTokenData:function(){var a,b,c=d.util.getURLParameter("token");if(!c)return d.util.console.error("Token is empty. Token is required parameter."),null;a=c.split(".")[1];try{b=JSON.parse(d.util.base64.decode(a))}catch(e){return d.util.console.error("Unable to parse token body",e.toString()),null}return b},guid:function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}()},a.appstore=d}(window),function(a){"use strict";var b,c,d;a.config={init:function(a,e,f){c=a,b=e,d=f}};var e=function(){return{getPrefsNames:function(){var a,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(a);return c},getString:function(a){var c="";return b[a]&&(c=b[a].value.toString()),c},getType:function(a){var c="";return b[a]&&(c=b[a].type.toString()),c},getPossibleValues:function(a){var c=[];return b[a]&&(c=b[a].possibleValues),c}}};a.util.registerOnLoadHandler(function(){a.config.dataSourceProxyUrl=c["appstore.api"].datasourceProxyUrl,a.config.datasourceActivProxyUrl=c["appstore.api"].activProxyWebSocketUrl,a.config.dataSourceProxyToken=c.authToken,a.config.unsupportedBrowserUrl=c["appstore.api"].unsupportedBrowserUrl,a.config.metadata=c["core.util"]["appstore.events"],a.config.prefs=new e,a.config.supportedBrowsers=d})}(appstore),function(){"use strict";appstore.util.registerOnLoadHandler(function(){appstore.dataSourceProxy={getUrl:function(a){var b=appstore.config.dataSourceProxyToken;a.params||(a.params={}),a.params.accessToken=b;var c=appstore.util.createRequestUri(a),d=appstore.config.dataSourceProxyUrl,e=d+"/data-sources/"+c;return e}}})}(),function(a){"use strict";var b=!1;a.util.registerOnLoadHandler(function(){a.ajax=function(){var c=function(){var a,b,c=[],d=[],e=!1,f=!1,g=function(c,d,e){var f;for(f=0;f<c.length;f++)c[f].apply(d,e);a=d,b=e};return{resolve:function(a,b){f||e||g(c,a,b),e=!0},reject:function(a,b){f||e||g(d,a,b),f=!0},promise:{url:"",success:function(d){return f||(e?d.apply(a,b):c.push(d)),this},error:function(c){return e||(f?c.apply(a,b):d.push(c)),this}}}},d=function(a,b,c){var d,e=new XMLHttpRequest;e.open(b.method||"GET",a,!0);for(d in b.headers)b.headers.hasOwnProperty(d)&&e.setRequestHeader(d,b.headers[d]);return e.addEventListener?e.addEventListener("load",function(a){c(a.target.response||a.target.responseText,a.target.status)},!1):e.onreadystatechange=function(){4===e.readyState&&0!==e.status&&c(e.responseText,e.status)},e.send(b.body),e},e=function(){var b=a.config.dataSourceProxyToken,c="Bearer";return c+" "+b},f=function(c){var d=c.deferred,e=d.promise.parseResponse(c.response,c.statusCode,c.xhr);d.promise.isSuccessful(e,c.statusCode)?(b&&a.util.console.log(c.dataSourceId,"response: ",e,c.statusCode),d.resolve(null,[e,c.statusCode])):(b&&a.util.console.error(c.dataSourceId,"response: ",e,c.statusCode),d.reject(null,[e,c.statusCode]))},g=function(a,b){return 200===b&&"response_parser_error"!==a.error},h=function(a){var b,c,d,e=a.getResponseHeader("WWW-Authenticate")||"";if(e){for(d=e.match(/"(.*?)"/gi),d.shift(),b=0;b<d.length;b++)d[b]=d[b].replace(/"/g,"");c={error:d[0],errorMessage:d[1]}}return c},i=function(a,b,c){var d;if(a)try{d=JSON.parse(a)}catch(e){d={error:"response_parser_error",errorMessage:"Unable to parse json."}}else d=h(c)||{error:"response_parser_error",errorMessage:"Unknown response parse error."};return d},j=function(h){var j,k=e(),l=c(),m=a.util.createRequestUri(h),n=a.config.dataSourceProxyUrl,o=n+"/data-sources/"+m;return h.headers=h.headers||{},h.headers.Authorization=k,h.headers["DS-Viewer"]=a.util.getTokenData().aud.user,h.headers["DS-Owner"]=a.util.getTokenData().aud.organization,l.promise.isSuccessful=g,l.promise.parseResponse=i,b&&a.util.console.log(h.dataSourceId,"request: ",h,{url:o}),j=d(o,h,function(a,b){f({deferred:l,response:a,statusCode:b,dataSourceId:h.dataSourceId,xhr:j})}),l.promise.abort=function(){var a=!1;return 4!==j.readyState&&(j.abort(),a=!0),a},l.promise};return j}()})}(appstore),function(a){"use strict";a.util.registerOnLoadHandler(function(){a.socket=function(){var b,c,d,e=!1,f=function(a){var b,c,d=[];for(c in a)a.hasOwnProperty(c)&&d.push(a[c]instanceof Array?c+"="+encodeURIComponent(a[c].join("|")):c+"="+encodeURIComponent([a[c]].join("")));return b=d.join("&")},g=function(b){var c,d=b.dataSourceId;return b.path&&(b.path="/"===b.path.charAt(0)?b.path:"/"+b.path,d+=b.path),a.util.isObject(b.params)&&(c=f(b.params),""!==c&&(d+="?"+c)),d},h=function(){var b=a.config.dataSourceProxyToken;return b},i=function(a){if(e===!1){var b={message:"Can not connect to "+a};c(b)}},j=function(a,f,g){if(!window.WebSocket)throw new Error("Not supported browser for WebSocket");try{if(f){var h=-1===a.indexOf("?")?"?":"&",j=a+h+"accessToken="+encodeURIComponent(f.Authorization);b=new WebSocket(j)}else b=new WebSocket(a)}catch(k){return c(k),!1}return void 0!==g&&setTimeout(function(){i(a)},5e3),b.onopen=function(){e=!0},b.onclose=function(a){if(!a.wasClean){var b={message:"Bad disconnection { Code: "+a.code+" Reason: "+a.reason+" } "};c(b)}},b.onmessage=function(a){d(a.data)},b.onerror=function(a){c(a)},!0},k=function(b,e){var f=g(b),i=a.config.datasourceActivProxyUrl,l=h(),m=i+"/"+f;return d=b.dataCallback,c=b.errorCallback,b.headers=b.headers||{},k.debug&&a.util.console.log(b.dataSourceId,"request: ",b,{url:m}),b.headers.Authorization=l,j(m,b.headers,e),this},l=function(a){b.send(a)},m=function(){b.close()};return k.debug=!1,{createSocket:k,sendMessage:l,close:m}}()})}(appstore),function(a){"use strict";a.util.registerOnLoadHandler(function(){a.prefs=function(){var b={},c=function(a,b,c){var d,e,f=!1;if("BOOL"===b)a=a.toLowerCase(),f="true"===a||"false"===a;else if("COLOR"===b)f=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(a);else if("ENUM"===b||"FONT_WEIGHT"===b||"FONT_STYLE"===b||"TEXT_DECORATION"===b){for(d=0,e=c.length;e>d;d++)if(c[d]){f=!0;break}}else f="INTEGER"===b?/^\-?[0-9]+$/.test(a):"FLOAT"===b?/^(\-?([0-9]+|[0-9]+\.[0-9]+))$/.test(a):!0;return f},d=function(){var b,c={},d=a.config.prefs,e=d.getPrefsNames();for(b=0;b<e.length;b++)c[e[b]]=d.getString(e[b]);return c},e=function(b){var c,d,e=a.config.prefs,f=e.getPrefsNames();for(d=0;d<f.length;d++)c=a.util.getURLParameter("X_"+f[d]),null!==c&&(b[f[d]]=c),"BOOL"===e.getType(f[d])&&(b[f[d]]=b[f[d]].toLowerCase())};return b=d(),e(b),{get:function(){return b},validate:function(){var d,e,f=[],g=a.config.prefs;for(e in b)b.hasOwnProperty(e)&&(d=c(b[e],g.getType(e),g.getPossibleValues(e)),d||f.push(e));return f.length>0?{isValid:!1,message:'The following preferences: "'+f.join(", ")+'" have invalid values. Please check them and try again.'}:{isValid:!0}}}}()})}(appstore),function(a){"use strict";a.util.registerOnLoadHandler(function(){a.symbology=function(){var b=[],c=function(a){if(void 0===a||null===a)throw new Error('"request" parameter must be specified');if(!a.targetType||"string"!=typeof a.targetType)throw new Error('"targetType" must be specified as string value.');if(!a.sourceType||"string"!=typeof a.sourceType)throw new Error('"sourceType" must be specified as string value.');if(!(a.symbols&&a.symbols instanceof Array&&0!==a.symbols.length))throw new Error('"symbols" must be specified as nonempty array value.');if(void 0!==a.preferredCountry&&"string"!=typeof a.preferredCountry)throw new Error('"preferredCountry" must be specified as string value.');if(void 0!==a.preferredExchange&&"string"!=typeof a.preferredExchange)throw new Error('"preferredExchange" must be specified as string value.');if(!a.callback||"function"!=typeof a.callback)throw new Error('"callback" must be specified as function.')},d=function(c,d){var e,f=!1;for(e=0;e<b.length&&!f;e++)b[e].source.toUpperCase()===c.toUpperCase()&&b[e].target.toUpperCase()===d.toUpperCase()&&(f=!0);if(!f)throw new Error(a.util.format('Resolving from "{0}" to "{1}" is not supported.',c,d))},e=function(b){var c;c=a.prefs.get(),void 0===b.preferredCountry&&(b.preferredCountry=c.GLOBAL_PREFERRED_COUNTRY),void 0===b.preferredExchange&&(b.preferredExchange=c.preferredExchange)},f="appstore-symbology-cache",g=function(){var b=a.util.localStorage.getItem(f);if(!b)return{};var c=JSON.parse(b);return c},h=function(a){return(new Date-new Date(a.timestamp))/1e3>a.ttl},i=function(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(c=a[b],h(c)&&delete a[b])},j=function(b){var c=JSON.stringify(b);try{a.util.localStorage.setItem(f,c)}catch(d){i(b),c=JSON.stringify(b);try{a.util.localStorage.setItem(f,c)}catch(e){a.util.localStorage.removeItem(f)}}},k=function(a){return[a.symbols,a.sourcetype,a.targettype,a.preferredcountry,a.preferredexchange].join("|")},l={get:function(a){var b=g(),c=b[a];return c?h(c)?(delete b[a],j(b),null):c.value:null},set:function(a,b,c){var d={ttl:c,value:b,timestamp:new Date},e=g();e[a]=d,j(e)}};return{resolve:function(b){c(b),d(b.sourceType,b.targetType),e(b);var f={symbols:b.symbols,sourcetype:b.sourceType,targettype:b.targetType};f.preferredcountry=b.preferredCountry||"",f.preferredexchange=b.preferredExchange||"";var g=l.get(k(f));g?setTimeout(function(){b.callback(g)},0):a.ajax({dataSourceId:"tr.symbology",path:"resolve",params:f}).success(function(a){l.set(k(f),a.data,86400),b.callback(a)}).error(function(a){b.errorCallback(a)})},getResolveMap:function(){return b},init:function(a){var c;for(b.length=0,c=0;c<a.length;c++)b.push(a[c])}}}(),a.symbology.init([{source:"RIC",target:"RIC"},{source:"RIC",target:"ILX"},{source:"RIC",target:"CUSIP"},{source:"RIC",target:"SEDOL"},{source:"RIC",target:"ISIN"},{source:"RIC",target:"TICKER"},{source:"RIC",target:"PrimaryRepoNo"},{source:"RIC",target:"LipperId"},{source:"ILX",target:"RIC"},{source:"ILX",target:"ILX"},{source:"ILX",target:"CUSIP"},{source:"ILX",target:"SEDOL"},{source:"ILX",target:"ISIN"},{source:"ILX",target:"TICKER"},{source:"CUSIP",target:"RIC"},{source:"CUSIP",target:"ILX"},{source:"CUSIP",target:"CUSIP"},{source:"CUSIP",target:"SEDOL"},{source:"CUSIP",target:"ISIN"},{source:"CUSIP",target:"TICKER"},{source:"SEDOL",target:"RIC"},{source:"SEDOL",target:"ILX"},{source:"SEDOL",target:"CUSIP"},{source:"SEDOL",target:"SEDOL"},{source:"SEDOL",target:"ISIN"},{source:"SEDOL",target:"TICKER"},{source:"ISIN",target:"RIC"},{source:"ISIN",target:"ILX"},{source:"ISIN",target:"CUSIP"},{source:"ISIN",target:"SEDOL"},{source:"ISIN",target:"ISIN"},{source:"ISIN",target:"TICKER"},{source:"ISIN",target:"PrimaryRic"},{source:"TICKER",target:"RIC"},{source:"TICKER",target:"ILX"},{source:"TICKER",target:"CUSIP"},{source:"TICKER",target:"SEDOL"},{source:"TICKER",target:"ISIN"},{source:"TICKER",target:"TICKER"},{source:"TICKER",target:"LipperId"},{source:"LipperId",target:"Ric"},{source:"LipperId",target:"Ticker"}])})}(appstore),function(a){"use strict";a.events=function(){var b={},c={},d=[],e="appstore-events-context",f=function(b){var c;c=JSON.stringify(b);try{a.util.localStorage.setItem(e,c)}catch(d){localStorage.removeItem(e)}},g=function(){return a.util.getURLParameter("frameId")||window.name||"."},h=function(){var b,c=a.util.localStorage.getItem(e);return c?(b=JSON.parse(c),b instanceof Array||(b=[])):b=[],b},i=function(a){var b;for(d.unshift({channel:a.channel,data:a.data}),b=1;b<d.length;b++)if(d[b].channel===a.channel){d.splice(b,1);break}f(d)},j=function(){return h()},k=function(a){f(a),d=h()},l=function(){d=[],a.util.localStorage.removeItem(e)},m=function(a){var b;try{b=JSON.parse(a)}catch(c){}return b&&b.type&&b.sender&&b.data?b:{type:"unsupported",data:{}}},n=function(b){var c,d,e,f=a.util.getURLParameter("parent"),h=g();window!==window.parent&&f&&(e=JSON.parse(JSON.stringify(b)),e.sender=h,a.events.debug&&(d='Sender: "{0}" sends message to the top receiver in channel: "{1}" with message body:',c=a.util.format(d,h,e.data.channel),a.util.console.log(c,e)),a.util.postMessage(JSON.stringify(e),f,window.parent))},o=function(c){var d,e,f=b[c.data.channel],h=g();f||(f={}),a.events.debug&&(e='Receiver: "{0}" subscribes underlying sender: "{1}" for channel: "{2}"',d=a.util.format(e,h,c.sender,c.data.channel),a.util.console.log(d)),f[c.sender]=!0,b[c.data.channel]=f,n(c)},p=function(c){var d,e,f=g();a.events.debug&&(e='Receiver: "{0}" unsubscribes underlying sender: "{1}" from channel: "{2}"',d=a.util.format(e,f,c.sender,c.data.channel),a.util.console.log(d)),b[c.data.channel]&&delete b[c.data.channel][c.sender],t(c.channel)&&n(c)},q=function(b,c){var d,e,f=g();a.events.debug&&(e='Sender: "{0}" sends message to the underlying receiver: "{1}" in channel: "{2}" with message body:',d=a.util.format(e,f,b,c.data.channel),a.util.console.log(d,c))},r=function(c){var d,e,f,h,i,j=g();d=b[c.data.channel]||{};for(e in d)d.hasOwnProperty(e)&&e!==c.sender&&(f=document.getElementById(e),f&&(i=JSON.parse(JSON.stringify(c)),i.sender=j,q(e,i),h=JSON.stringify(i),a.util.postMessage(h,f.src,f.contentWindow)))},s=function(b,d){var e,f,h,j=g();r(b),d||n(b),i(b.data),h=c[b.data.channel],h&&b.sender!==j&&(a.events.debug&&(f='Receiver: "{0}" calls message handler in channel: "{1}" from sender: "{2}" with data:',e=a.util.format(f,j,b.data.channel,b.sender),a.util.console.log(e,b.data.data)),h(b.data.channel,b.data.data,b.sender))},t=function(a){var d,e=[];if(b[a])for(d in b[a])b[a].hasOwnProperty(d)&&e.push(d);return c[a]&&e.push(g()),0===e.length};return d=h(),a.util.receiveMessage(function(b){var c,d,e=m(b.data),f=b.source===window.parent,h=g();"unsupported"!==e.type?(a.events.debug&&(d='Receiver: "{0}" got from sender: "{1}" message in channel: "{2}" with message body:',c=a.util.format(d,h,e.sender,e.data.channel),a.util.console.log(c,e)),"subscribe"===e.type?f||o(e):"publish"===e.type?s(e,f):"unsubscribe"===e.type&&(f||p(e))):a.events.debug&&(d='Receiver: "{0}" skipped unsupported event:',c=a.util.format(d,h),a.util.console.log(c,b))}),{subscribe:function(b,d){var e,f,h=g(),i={type:"subscribe",sender:h,data:{channel:b}};return c[b]=d,a.events.debug&&(f='Sender: "{0}" subsribes for the channel: "{1}"',e=a.util.format(f,h,b),a.util.console.log(e)),n(i),this},unsubscribe:function(b){var d,e,f=g(),h={type:"unsubscribe",sender:f,data:{channel:b}};return delete c[b],a.events.debug&&(e='Sender: "{0}" unsubsribes from the channel: "{1}"',d=a.util.format(e,f,b),a.util.console.log(d)),t(b)&&n(h),this},publish:function(b,c){var d,e,f=g(),h={type:"publish",sender:f,data:{channel:b}};return a.events.debug&&(e='Sender: "{0}" publishes event in channel: "{1}" with data:',d=a.util.format(e,f,b),a.util.console.log(d,c)),h.data.data=JSON.parse(JSON.stringify(c)),setTimeout(function(){s(h,!1)},0),this},getContext:j,setContext:k,resetContext:l,debug:!1}}()}(appstore),function(a){"use strict";a.util.registerOnLoadHandler(function(){var b=a.config.metadata||{},c=JSON.stringify({type:"metadataReadyCall",frameId:a.util.getURLParameter("frameId"),metadata:b}),d=a.util.getURLParameter("parent");a.util.postMessage(c,d,window.parent)})}(appstore),function(a){"use strict";var b=!0;a.dynamicHeight={enable:function(){b=!0},disable:function(){b=!1}},a.util.receiveMessage(function(c){var d,e,f;try{d=JSON.parse(c.data)}catch(g){}d&&"adjustHeightCall"===d.type&&d.frameId&&d.data&&b&&(f=document.getElementById(d.frameId),f&&(f.style.height=d.data.height+"px",e=JSON.stringify({type:"adjustHeightReply",data:d.data}),a.util.postMessage(e,f.src,f.contentWindow)))})}(appstore),function(a){"use strict";a.util.registerOnLoadHandler(function(){var b=navigator.userAgent.search(/MSIE/)>0;a.adjustHeight=function(){var c,d,e=function(b,c){var d=JSON.stringify({type:"adjustHeightCall",frameId:a.util.getURLParameter("frameId"),data:{height:b,isFirst:c}}),e=a.util.getURLParameter("parent");a.util.postMessage(d,e,window.parent)},f=50;return a.util.receiveMessage(function(a){var d;try{d=JSON.parse(a.data)}catch(f){}d&&"adjustHeightReply"===d.type&&d.data&&(d.data.isFirst&&b?e(document.documentElement.scrollHeight,!1):"function"==typeof c&&c())}),function(a){return clearTimeout(d),d=setTimeout(function(){isNaN(a)?(a=b?document.body.offsetHeight:document.documentElement.offsetHeight,e(a,!0)):e(a,!1)},f),{complete:function(a){c=a}}}}()})}(appstore),function(a){"use strict";a.util.registerOnLoadHandler(function(){a.resourceUrl=""})}(appstore),function(a){"use strict";a.util.registerOnLoadHandler(function(){var b=a.config.supportedBrowsers||[],c={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){var b,c,d;for(b=0;b<a.length;b++)if(c=a[b].string,d=a[b].prop,this.versionSearchString=a[b].versionSearch||a[b].identity,c){if(-1!==c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!==b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"IE",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"IE",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]},d=function(){var a,d=!1;if(!b.length)return!0;for(a=0;a<b.length;a++)if(b[a].browser.toLowerCase()===c.browser.toLowerCase()&&(!b[a].version||c.version>=b[a].version)){d=!0;break}return d};if(c.init(),!d()){var e,f,g,h=[];for(g=0;g<b.length;g++)e=b[g],h.push(e.browser+" "+e.version);a.cancelReady(),f=a.config.unsupportedBrowserUrl,location.href=f+"?supportedBrowsers="+h.join(",")}})}(appstore),function(a){"use strict";a.addApplication=function(a,b,c,d){var e,f="<iframe",g=b,h=function(a){return a&&"object"==typeof a&&a.nodeType&&1===a.nodeType};if("string"==typeof b||b instanceof String?b=document.getElementById(b):h(b)&&(g=b.id),!a||!d)throw new Error("Parameters id and signedUrl are mandatory.");if(!h(b))throw new Error('DOM element with ID "'+g+'" is required to render the widget "'+a+'".');c=c||{},c.id=a.replace(/\s/g,"-"),c.name=c.id,c.src=d+"&frameId="+encodeURIComponent(c.id),c.name=c.id;for(e in c)c.hasOwnProperty(e)&&(f+=" "+e+'="'+c[e]+'"');return f+="></iframe>",b.innerHTML=f,b.children[0]}}(appstore),function(a){"use strict";var b=!1,c=function(a){var b,c,d,e,f,g;return a?(a=a.toLowerCase(),0===a.indexOf("//")&&(a=window.location.protocol+a),-1===a.indexOf("://")&&(a=window.location.protocol+"//"+a),b=a.substring(a.indexOf("://")+3),c=b.indexOf("/"),-1!==c&&(b=b.substring(0,c)),d=a.substring(0,a.indexOf("://")),e="",f=b.indexOf(":"),-1!==f&&(g=b.substring(f+1),b=b.substring(0,f),("http"===d&&"80"!==g||"https"===d&&"443"!==g)&&(e=":"+g)),d+"://"+b+e):""},d=function(d){if(c(d.origin)===c("<%%=viewerUrl%%>")&&d.data&&"string"==typeof d.data&&0===d.data.indexOf("appstore:")){b&&a.console.log("syn received from",d.origin,"at",(new Date).getTime());var e={secret:d.data,URL:document.URL,eventsContext:a.events.getContext()};b&&a.console.log("send ack to",d.origin,"at",(new Date).getTime()),d.source.postMessage(JSON.stringify(e),d.origin)}};a.util.receiveMessage(d)}(appstore),function(a){"use strict";var b,c=a.util.getURLParameter("parent"),d=a.util.getTokenData(),e=d.aud.domains||[],f=a.util.runOnLoadHandlers,g=0,h=!1,i=!1,j=!1,k=window.addEventListener||window.attachEvent,l=function(){document.write('<style>body{color: #F4F4F4;background-color: #2C2C2C;}</style><blockquote><h2>Access to the widget has been forbidden</h2><p>We apologise for the inconvenience. Widget is tried to be used in a wrong domain. Access to the widget has been forbidden. Please <a href="mailto:%%support.email.address%%" style="cursor: pointer;color: #F4F4F4;">contact</a> support team if necessary.</p></blockquote>'),document.close(),void 0!==window.stop?window.stop():void 0!==document.execCommand&&document.execCommand("Stop",!1),window.parent.postMessage(JSON.stringify({loadedFrame:window.name}),"*")},m=function(){h||l()},n=function(a){if(!a)return null;try{return JSON.parse(a)}catch(b){return null}},o=function(a){return a.replace(/(function )(\w+)(\()/,"$1$3").replace("\n","")},p=function(a){if(!a)return"";a=a.toLowerCase(),0===a.indexOf("//")&&(a=window.location.protocol+a),-1===a.indexOf("://")&&(a=window.location.protocol+"//"+a);var b=a.substring(a.indexOf("://")+3),c="",d=b.indexOf("/");-1!==d&&(c=b.substring(d),b=b.substring(0,d));var e=c.indexOf("?");-1!==e&&(c=c.substring(0,e)),(0===c.length||"/"!==c[c.length-1])&&(c+="/");var f=a.substring(0,a.indexOf("://")),g="",h=b.indexOf(":");if(-1!==h){var i=b.substring(h+1);b=b.substring(0,h),("http"===f&&"80"!==i||"https"===f&&"443"!==i)&&(g=":"+i)}return f+"://"+b+g+c},q=function(a,b){var c=o(b.apply(a)),d=o(b.toString());return c===d},r=function(a){var b=function(){},c=b.toString;return"object"==typeof a||q(a,c)},s=function(a,b){var c=p(a),d=p(b);return 0===d.indexOf(c)},t=function(){f()},u=function(d){var e=n(d.data);if(e&&e.secret&&0===e.secret.indexOf("appstore:")&&!(g>0)){i&&a.util.console.log("ack received from",d.origin,"at",(new Date).getTime()),g++;var f=r(k)&&r(window.parent.postMessage)&&r(setTimeout);h=s(c,e.URL)&&e.secret===b&&f,h?(e.eventsContext&&(a.events.initialContext=e.eventsContext),j?t():a.util.runOnLoadHandlers=function(){t()}):l()}},v=function(d){window.addEventListener?k("message",u,!1):k("onmessage",u),a.util.runOnLoadHandlers=function(){j=!0,setTimeout(m,d)};try{i&&a.util.console.log("send syn to",c,"at",(new Date).getTime()),b="appstore:"+((new Date).getTime()+Math.random()).toString(),window.parent.postMessage(b,c)}catch(e){l()}},w=function(){var a;for(a=0;a<e.length;a++)if(s(c,e[a]))return!0;return!1};w()&&s(c,document.referrer)?v(15e3):setTimeout(function(){l()},0)}(appstore),function(a){"use strict";a.util.registerOnLoadHandler(function(){var b=[];a.resize=function(a){b.push(a)};var c=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,function(){return c.call(a,window.event)})},d=function(){var a,b;return void 0!==window.innerWidth?(a=window.innerWidth,b=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):(a=document.body.clientWidth,b=document.body.clientHeight),{width:a,height:b}},e=function(){var a,c,e=null,f=null,g=!1,h=!1;return function(){var i,j,k,l=d();try{e=window.frameElement.style.width||window.frameElement.getAttribute("width")||"100%",h=!0}catch(m){e=l.width,h=!1}if(f=l.height,h?-1===e.indexOf("%")?(j=parseInt(e),a!==j&&(document.body.style.width=j-1+"px")):j=parseInt(l.width):j=parseInt(e),k=parseInt(f),(a!==j||c!==k)&&(a=j,c=k,g=!0),g&&b.length>0)for(i=0;i<b.length;i++)b[i](j,k),g=!1}}();c(window,"resize",e)})}(appstore),function(a,b){"use strict";var c=!1,d=[];a.apiVersion="widget",a.ready=function(b){c?b(a.events.initialContext):d.push(b)},a.cancelReady=function(){d.length=0},a.util.registerOnLoadHandler(function(){var b;for(b=0;b<d.length;b++)d[b](a.events.initialContext);c=!0}),b.appsngen=a}(appstore,window);